// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.18;

import "forge-std/Test.sol";
import "./BaseTest.sol";

import {SolmateMockERC20} from "src/SolmateMockERC20.sol";

import "foundry-huff/HuffDeployer.sol";

contract DemoTest is BaseTest {

    function setUp() public {

        bytes memory code = hex"602060203803600039600051600055466001557f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c96040527f546f6b656e0000000000000000000000000000000000000000000000000000006060526020606020606052603160805260026080206080524660a0523060c05260a0604020600255610ae880608a3d393df3583560e01c806340c10f191461098f5780639dc29fac14610a35578063d505accf146103b75780637ecebe001461039a57806306fdde031461032557806395d89b4114610689578063313ce567146102125780633644e5151461025f57806318160ddd146106fe57806370a08231146101b4578063dd62ed3e146100a3578063a9059cbb146108b257806323b872dd1461074b578063095ea7b3146101125761098a575b6000600b34156100e2577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506024356004356003600052600060200152604060002060006020015260005260406000205460005260206000f35b6000600b3415610151577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506024356004353360036000526000602001526040600020600060200152600052604060002055602435600052600435337f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560206000a3600160005260206000f35b6000600b34156101f3577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b5050600435600460005260006020015260406000205460005260206000f35b6000600b3415610251577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b505060005460005260206000f35b6000600b341561029e577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50504660015414610318577f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c96040527f546f6b656e0000000000000000000000000000000000000000000000000000006060526020606020606052603160805260026080206080524660a0523060c05260a060402061031c565b6002545b60005260206000f35b6000600b3415610364577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b5050602060005260056020527f546f6b656e00000000000000000000000000000000000000000000000000000060405260606000f35b600435600560005260006020015260406000205460005260206000f35b6000600b34156103f6577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506064358042116105c7576004358060056000526000602001526040600020548060010182600560005260006020015260406000205590506044356024356004357f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c960005260205260405260605260805260a05260c060002046600154146104e8577f6e71edae12b1b97f4d1f60370fef10105fa2faae0126114a169c64845d6126c96040527f546f6b656e0000000000000000000000000000000000000000000000000000006060526020606020606052603160805260026080206080524660a0523060c05260a06040206104ec565b6002545b7f19010000000000000000000000000000000000000000000000000000000000008260f01b8260f01b8460101c1783839060101c17604052606052608052604260402060005260843560205260a43560405260c4356060526044356024356020608060806000600163fffffffffa1561062857608051806000146106285780600435141561062857600360005260006020015260406000206000602001526000526040600020556044356000526024356004357f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560206000a3005b7f5045524d49545f444541444c494e455f4558504952454400000000000000000060176000610625577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50505b7f494e56414c49445f5349474e4552000000000000000000000000000000000000600e6000610686577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50505b6000600b34156106c8577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b5050602060005260036020527f544b4e000000000000000000000000000000000000000000000000000000000060405260606000f35b6000600b341561073d577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b505060065460005260206000f35b6000600b341561078a577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506024356004353381600360005260006020015260406000206000602001526000526040600020548060443583331461081557817fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1461081557116108ac576044359003338260036000526000602001526040600020600060200152600052604060002055610819565b5050505b6044358160046000526000602001526040600020548082111561083c5760006000fd5b8190038260046000526000602001526040600020558281906004600052600060200152604060002054018360046000526000602001526040600020556000527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60206000a3600160005260206000f35b60006000fd5b6000600b34156108f1577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b5050600435336024358160046000526000602001526040600020548082111561091a5760006000fd5b8190038260046000526000602001526040600020558281906004600052600060200152604060002054018360046000526000602001526040600020556000527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60206000a3600160005260206000f35b600080fd5b6000600b34156109ce577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506004356024358190828190600460005260006020015260406000205401836004600052600060200152604060002055806006540160065560005260007fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60206000a350005b6000600b3415610a74577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260245260445260806000fd5b50506004356024356000919081600460005260006020015260406000205480821115610aa05760006000fd5b81900382600460005260006020015260406000205580600654036006556000527fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60206000a300";

        
        address tokenAddress = HuffDeployer.config().with_args(
            bytes.concat(abi.encode("Token"), abi.encode("TKN"), abi.encode(uint256(18)))
        ).deploy("ERC20");
        
        //address tokenAddress;
        //assembly {
        //    tokenAddress := create(0, add(code, 0x20), mload(code))
        //}
        token = SolmateMockERC20(tokenAddress);
    }
}